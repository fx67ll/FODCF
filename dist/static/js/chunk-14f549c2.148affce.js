(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14f549c2"],{"04d1":function(e,t,r){var a=r("342f"),n=a.match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},"4e82":function(e,t,r){"use strict";var a=r("23e7"),n=r("e330"),l=r("59ed"),o=r("7b0b"),i=r("07fa"),s=r("083a"),u=r("577e"),c=r("d039"),d=r("addb"),m=r("a640"),p=r("04d1"),y=r("d998"),f=r("2d00"),h=r("512ce"),g=[],v=n(g.sort),b=n(g.push),w=c((function(){g.sort(void 0)})),k=c((function(){g.sort(null)})),_=m("sort"),T=!c((function(){if(f)return f<70;if(!(p&&p>3)){if(y)return!0;if(h)return h<603;var e,t,r,a,n="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(a=0;a<47;a++)g.push({k:t+a,v:r})}for(g.sort((function(e,t){return t.v-e.v})),a=0;a<g.length;a++)t=g[a].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}})),P=w||!k||!_||!T,N=function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:u(t)>u(r)?1:-1}};a({target:"Array",proto:!0,forced:P},{sort:function(e){void 0!==e&&l(e);var t=o(this);if(T)return void 0===e?v(t):v(t,e);var r,a,n=[],u=i(t);for(a=0;a<u;a++)a in t&&b(n,t[a]);d(n,N(e)),r=i(n),a=0;while(a<r)t[a]=n[a++];while(a<u)s(t,a++);return t}})},"512ce":function(e,t,r){var a=r("342f"),n=a.match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},"83ec":function(e,t,r){"use strict";r.d(t,"e",(function(){return n})),r.d(t,"c",(function(){return l})),r.d(t,"a",(function(){return o})),r.d(t,"f",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"d",(function(){return u}));var a=r("b775");function n(e){return Object(a["a"])({url:"/secret/key/list",method:"get",params:e})}function l(e){return Object(a["a"])({url:"/secret/key/"+e,method:"get"})}function o(e){return Object(a["a"])({url:"/secret/key",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/secret/key",method:"put",data:e})}function s(e){return Object(a["a"])({url:"/secret/key/"+e,method:"delete"})}function u(e){return Object(a["a"])({url:"/secret/key/getSecretKeyConfigForApp",method:"get",params:e})}},addb:function(e,t,r){var a=r("4dae"),n=Math.floor,l=function(e,t){var r=e.length,s=n(r/2);return r<8?o(e,t):i(e,l(a(e,0,s),t),l(a(e,s),t),t)},o=function(e,t){var r,a,n=e.length,l=1;while(l<n){a=l,r=e[l];while(a&&t(e[a-1],r)>0)e[a]=e[--a];a!==l++&&(e[a]=r)}return e},i=function(e,t,r,a){var n=t.length,l=r.length,o=0,i=0;while(o<n||i<l)e[o+i]=o<n&&i<l?a(t[o],r[i])<=0?t[o++]:r[i++]:o<n?t[o++]:r[i++];return e};e.exports=l},d299:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,size:"small",inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"彩票期号",prop:"dateCode"}},[r("el-input",{attrs:{placeholder:"请输入查询的彩票期号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.dateCode,callback:function(t){e.$set(e.queryParams,"dateCode",t)},expression:"queryParams.dateCode"}})],1),r("el-form-item",{attrs:{label:"购买号码",prop:"recordNumber"}},[r("el-input",{attrs:{placeholder:"请输入查询的购买号码",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.recordNumber,callback:function(t){e.$set(e.queryParams,"recordNumber",t)},expression:"queryParams.recordNumber"}})],1),r("el-form-item",{attrs:{label:"固定追号",prop:"chaseNumber"}},[r("el-input",{attrs:{placeholder:"请输入查询的固定追号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.chaseNumber,callback:function(t){e.$set(e.queryParams,"chaseNumber",t)},expression:"queryParams.chaseNumber"}})],1),r("el-form-item",{attrs:{label:"中奖号码",prop:"winningNumber"}},[r("el-input",{attrs:{placeholder:"请输入查询的中奖号码",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.winningNumber,callback:function(t){e.$set(e.queryParams,"winningNumber",t)},expression:"queryParams.winningNumber"}})],1),r("el-form-item",{attrs:{label:"查询记录",prop:"hasWinningNumber"}},[r("el-select",{attrs:{placeholder:"请选择是否查询记录过中奖号码",clearable:""},model:{value:e.queryParams.hasWinningNumber,callback:function(t){e.$set(e.queryParams,"hasWinningNumber",t)},expression:"queryParams.hasWinningNumber"}},e._l(e.dict.type.sys_yes_no,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"是否中奖",prop:"isWin"}},[r("el-select",{attrs:{placeholder:"请选择是否中奖",clearable:""},model:{value:e.queryParams.isWin,callback:function(t){e.$set(e.queryParams,"isWin",t)},expression:"queryParams.isWin"}},e._l(e.dict.type.sys_yes_no,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"中奖金额",prop:"winningPrice"}},[r("el-input",{attrs:{placeholder:"请输入查询的中奖金额",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.winningPrice,callback:function(t){e.$set(e.queryParams,"winningPrice",t)},expression:"queryParams.winningPrice"}})],1),r("el-form-item",{attrs:{label:"彩票类型",prop:"numberType"}},[r("el-select",{attrs:{placeholder:"请选择查询的彩票类型",clearable:""},model:{value:e.queryParams.numberType,callback:function(t){e.$set(e.queryParams,"numberType",t)},expression:"queryParams.numberType"}},e._l(e.dict.type.fx67ll_lottery_type,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"彩票周期",prop:"weekType"}},[r("el-select",{attrs:{placeholder:"请选择查询的星期几",clearable:""},model:{value:e.queryParams.weekType,callback:function(t){e.$set(e.queryParams,"weekType",t)},expression:"queryParams.weekType"}},e._l(e.dict.type.sys_week_type,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"是否追加",prop:"hasMorePurchases"}},[r("el-select",{attrs:{placeholder:"请选择是否有追加购买",clearable:""},model:{value:e.queryParams.hasMorePurchases,callback:function(t){e.$set(e.queryParams,"hasMorePurchases",t)},expression:"queryParams.hasMorePurchases"}},e._l(e.dict.type.sys_yes_no,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"创建者",prop:"createBy"}},[r("el-input",{attrs:{placeholder:"请输入查询的记录创建者",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.createBy,callback:function(t){e.$set(e.queryParams,"createBy",t)},expression:"queryParams.createBy"}})],1),r("el-form-item",{attrs:{label:"更新者",prop:"updateBy"}},[r("el-input",{attrs:{placeholder:"请输入查询的记录更新者",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.updateBy,callback:function(t){e.$set(e.queryParams,"updateBy",t)},expression:"queryParams.updateBy"}})],1),r("el-form-item",{attrs:{label:"创建时间"}},[r("el-date-picker",{staticStyle:{width:"240px"},attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:""},model:{value:e.daterangeCreateTime,callback:function(t){e.daterangeCreateTime=t},expression:"daterangeCreateTime"}})],1),r("el-form-item",{attrs:{label:"更新时间"}},[r("el-date-picker",{staticStyle:{width:"240px"},attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:""},model:{value:e.daterangeUpdateTime,callback:function(t){e.daterangeUpdateTime=t},expression:"daterangeUpdateTime"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),r("el-row",{staticClass:"mb8",attrs:{gutter:10}},[r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["lottery:log:add"],expression:"['lottery:log:add']"}],attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["lottery:log:edit"],expression:"['lottery:log:edit']"}],attrs:{type:"success",plain:"",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["lottery:log:remove"],expression:"['lottery:log:remove']"}],attrs:{type:"danger",plain:"",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["lottery:log:export"],expression:"['lottery:log:export']"}],attrs:{type:"warning",plain:"",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1),r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["punch:log:total"],expression:"['punch:log:total']"}],attrs:{type:"info",plain:"",icon:"el-icon-data-line",size:"mini"},on:{click:e.handleLogTotalOpen}},[e._v("查看历史号码中奖金额统计")])],1),r("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.logList},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),r("el-table-column",{attrs:{label:"彩票期号",align:"center",prop:"dateCode",fixed:"left",width:"100"}}),r("el-table-column",{attrs:{label:"当日购买号码",align:"center",prop:"recordNumber",fixed:"left",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return["-"===t.row.recordNumber?r("span",[e._v(e._s(t.row.recordNumber))]):e._e(),t.row.recordNumberList.length>0?r("div",e._l(t.row.recordNumberList,(function(t,a){return r("div",{key:a},[r("div",[e._v(e._s(t))])])})),0):e._e()]}}])}),r("el-table-column",{attrs:{label:"当日固定追号",align:"center",prop:"chaseNumber",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return["-"===t.row.chaseNumber?r("span",[e._v(e._s(t.row.chaseNumber))]):e._e(),t.row.chaseNumberList.length>0?r("div",e._l(t.row.chaseNumberList,(function(t,a){return r("div",{key:a},[r("div",[e._v(e._s(t))])])})),0):e._e()]}}])}),r("el-table-column",{attrs:{label:"当日中奖号码",align:"center",prop:"winningNumber",width:"160"}}),r("el-table-column",{attrs:{label:"是否中奖",align:"center",prop:"isWin",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("dict-tag",{attrs:{options:e.dict.type.sys_yes_no,value:t.row.isWin}})]}}])}),r("el-table-column",{attrs:{label:"中奖金额",align:"center",prop:"winningPrice",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("-"===t.row.winningPrice?"":"￥")+e._s(t.row.winningPrice)+" ")]}}])}),r("el-table-column",{attrs:{label:"彩票类型",align:"center",prop:"numberType",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("dict-tag",{attrs:{options:e.dict.type.fx67ll_lottery_type,value:t.row.numberType}})]}}])}),r("el-table-column",{attrs:{label:"彩票周期",align:"center",prop:"weekType",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("dict-tag",{attrs:{options:e.dict.type.sys_week_type,value:t.row.weekType}})]}}])}),r("el-table-column",{attrs:{align:"center",prop:"hasMorePurchases",width:"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[e._v(" 是否有追加购买行为 "),r("el-tooltip",{staticClass:"item",attrs:{content:e.hasAppendBuyingTip,placement:"top"}},[r("i",{staticClass:"el-icon-question"})])]}},{key:"default",fn:function(t){return[r("dict-tag",{attrs:{options:e.dict.type.sys_yes_no,value:t.row.hasMorePurchases}})]}}])}),r("el-table-column",{attrs:{label:"记录更新者",align:"center",prop:"updateBy",width:"100"}}),r("el-table-column",{attrs:{label:"记录更新时间",align:"center",prop:"updateTime",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e.parseTime(t.row.updateTime,"{y}-{m}-{d} {h}:{i}:{s}")))])]}}])}),r("el-table-column",{attrs:{label:"记录创建者",align:"center",prop:"createBy",fixed:"right",width:"100"}}),r("el-table-column",{attrs:{label:"记录创建时间",align:"center",prop:"createTime",fixed:"right",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e.parseTime(t.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}"))+" ")])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["lottery:log:queryReward"],expression:"['lottery:log:queryReward']"}],attrs:{size:"mini",type:"text",icon:"el-icon-coordinate",loading:e.qryRewardLoading},on:{click:function(r){return e.handleQueryRewardDubounce(t.row)}}},[e._v("查询中奖信息")]),r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["lottery:log:edit"],expression:"['lottery:log:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit",disabled:e.qryRewardLoading},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改")]),r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["lottery:log:remove"],expression:"['lottery:log:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete",disabled:e.qryRewardLoading},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize,"page-sizes":[5,10,23,50,100]},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),r("el-dialog",{staticStyle:{top:"40px"},attrs:{title:e.title,visible:e.open,"close-on-click-modal":!1,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"彩票期号",prop:"dateCode"}},[r("el-input",{attrs:{placeholder:"请输入当日购买号码",clearable:""},model:{value:e.form.dateCode,callback:function(t){e.$set(e.form,"dateCode",t)},expression:"form.dateCode"}})],1),r("el-form-item",{attrs:{label:"购买号码",prop:"recordNumber"}},[r("el-input",{attrs:{placeholder:"请输入当日购买号码",clearable:""},model:{value:e.form.recordNumber,callback:function(t){e.$set(e.form,"recordNumber",t)},expression:"form.recordNumber"}})],1),r("el-form-item",{attrs:{label:"固定追号",prop:"chaseNumber"}},[r("el-input",{attrs:{placeholder:"请输入当日固定追号",clearable:""},model:{value:e.form.chaseNumber,callback:function(t){e.$set(e.form,"chaseNumber",t)},expression:"form.chaseNumber"}})],1),r("el-form-item",{attrs:{label:"中奖号码",prop:"winningNumber"}},[r("el-input",{attrs:{placeholder:"请输入当日中奖号码",clearable:""},model:{value:e.form.winningNumber,callback:function(t){e.$set(e.form,"winningNumber",t)},expression:"form.winningNumber"}})],1),r("el-form-item",{attrs:{label:"是否中奖",prop:"isWin"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择是否中奖",clearable:""},model:{value:e.form.isWin,callback:function(t){e.$set(e.form,"isWin",t)},expression:"form.isWin"}},e._l(e.dict.type.sys_yes_no,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),"Y"===e.form.isWin?r("el-form-item",{attrs:{label:"中奖金额",prop:"winningPrice",clearable:""}},[r("el-input",{attrs:{placeholder:"请输入中奖金额"},model:{value:e.form.winningPrice,callback:function(t){e.$set(e.form,"winningPrice",t)},expression:"form.winningPrice"}})],1):e._e(),r("el-form-item",{attrs:{label:"彩票类型",prop:"numberType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择当日购买的彩票类型"},on:{change:e.handleNumberTypeChange},model:{value:e.form.numberType,callback:function(t){e.$set(e.form,"numberType",t)},expression:"form.numberType"}},e._l(e.dict.type.fx67ll_lottery_type,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:parseInt(e.value)}})})),1)],1),e.form.numberType?r("el-form-item",{attrs:{label:"彩票周期",prop:"weekType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择星期几"},model:{value:e.form.weekType,callback:function(t){e.$set(e.form,"weekType",t)},expression:"form.weekType"}},e._l(e.dynamicWeekList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:parseInt(e.value)}})})),1)],1):e._e(),r("el-form-item",{attrs:{label:"是否有追加",prop:"hasMorePurchases"}},[r("el-select",{staticStyle:{width:"calc(100% - 22px)","margin-right":"8px"},attrs:{placeholder:"请选择是否有追加购买"},model:{value:e.form.hasMorePurchases,callback:function(t){e.$set(e.form,"hasMorePurchases",t)},expression:"form.hasMorePurchases"}},e._l(e.dict.type.sys_yes_no,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),r("el-tooltip",{staticClass:"item",attrs:{content:e.hasAppendBuyingTip,placement:"top-end"}},[r("i",{staticClass:"el-icon-question"})])],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),r("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),r("el-dialog",{staticStyle:{top:"130px"},attrs:{title:"历史号码中奖金额统计",visible:e.logTotalOpen,"close-on-click-modal":!1,width:"800px","append-to-body":""},on:{"update:visible":function(t){e.logTotalOpen=t}}},[r("div",{attrs:{id:"logTotalContainer"}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.logTotalLoading,expression:"logTotalLoading"}],attrs:{data:e.logTotalList}},[r("el-table-column",{attrs:{label:"统计类型",align:"center",prop:"lotteryType"}}),r("el-table-column",{attrs:{label:"总购买期数",align:"center",prop:"totalTickets"}}),r("el-table-column",{attrs:{label:"总购买注数",align:"center",prop:"totalNumbers"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{color:"#e6a23c"}},[e._v(e._s(t.row.totalNumbers))])]}}])}),r("el-table-column",{attrs:{label:"总花费金额",align:"center",prop:"totalNumbers"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{color:"#409eff"}},[e._v(e._s("￥"+2*t.row.totalNumbers))])]}}])}),r("el-table-column",{attrs:{label:"中奖期数",align:"center",prop:"winningTickets"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{color:"#2ecc71"}},[e._v(e._s(t.row.winningTickets))])]}}])}),r("el-table-column",{attrs:{label:"中奖金额",align:"center",prop:"totalWinningAmount"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticStyle:{color:"#ff5a5f"}},[e._v(e._s("￥"+t.row.totalWinningAmount))])]}}])}),r("el-table-column",{attrs:{label:"回血比例",align:"center",prop:"totalWinningAmount"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s((t.row.totalWinningAmount/(2*t.row.totalNumbers)*100).toFixed(2)+"%"))])]}}])})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.handleLogTotalClose}},[e._v("关闭")])],1)])],1)},n=[],l=r("5530"),o=r("2909"),i=(r("d81d"),r("d3b7"),r("25f0"),r("4de4"),r("caad"),r("2532"),r("ac1f"),r("5319"),r("4e82"),r("a9e3"),r("a15b"),r("159b"),r("99af"),r("b775"));function s(e){return Object(i["a"])({url:"/lottery/log/list",method:"get",params:e})}function u(e){return Object(i["a"])({url:"/lottery/log/"+e,method:"get"})}function c(e){return Object(i["a"])({url:"/lottery/log",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/lottery/log",method:"put",data:e})}function m(e){return Object(i["a"])({url:"/lottery/log/"+e,method:"delete"})}function p(e){return Object(i["a"])({url:"/lottery/log/getLotteryTotalReward",method:"get",params:e})}var y=r("83ec"),f=r("ed08");function h(){return"971023@fx67ll520gn980404forever!!!"}var g=r("bc3a"),v=r.n(g),b=r("c46f"),w={name:"Log",dicts:["fx67ll_lottery_type","sys_yes_no","sys_week_type"],data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,logList:[],title:"",open:!1,daterangeCreateTime:[],daterangeUpdateTime:[],queryParams:{pageNum:1,pageSize:10,dateCode:null,recordNumber:null,chaseNumber:null,winningNumber:null,hasWinningNumber:null,isWin:null,winningPrice:null,numberType:null,weekType:null,hasMorePurchases:null,delFlag:null,userId:null,createBy:null,createTime:null,updateBy:null,updateTime:null},form:{},rules:{recordNumber:[{required:!0,message:"当日购买号码不能为空",trigger:"blur"}],numberType:[{required:!0,message:"当日购买的彩票类型不能为空",trigger:"change"}],weekType:[{required:!0,message:"星期几不能为空",trigger:"change"}],hasMorePurchases:[{required:!0,message:"是否有追加购买不能为空",trigger:"change"}]},hasAppendBuyingTip:"当日第一次购买之后是否有追加购买的行为，包括同一个号码的追加，或者另外购买其他的号码",dynamicWeekList:[],logTotalOpen:!1,logTotalList:[],logTotalLoading:!1,qryRewardLoading:!1,lotteryTypeList:[1,2,3,4,5,"1","2","3","4","5"]}},created:function(){this.getList()},methods:{getTotalReward:function(){var e=this;e.logTotalLoading=!0,p().then((function(t){e.logTotalList=e.formatObjectArrayNullProperty(t.rows,!0),e.logTotalLoading=!1}))},handleLogTotalOpen:function(){this.getTotalReward(),this.logTotalOpen=!0},handleLogTotalClose:function(){this.logTotalOpen=!1},clearDateQueryParams:function(){this.queryParams.beginCreateTime=null,this.queryParams.endCreateTime=null,this.queryParams.beginUpdateTime=null,this.queryParams.endUpdateTime=null},getList:function(){var e=this;this.loading=!0,this.clearDateQueryParams(),null!=this.daterangeCreateTime&&""!=this.daterangeCreateTime&&(this.queryParams.beginCreateTime=this.daterangeCreateTime[0],this.queryParams.endCreateTime=this.daterangeCreateTime[1]),null!=this.daterangeUpdateTime&&""!=this.daterangeUpdateTime&&(this.queryParams.beginUpdateTime=this.daterangeUpdateTime[0],this.queryParams.endUpdateTime=this.daterangeUpdateTime[1]),s(this.queryParams).then((function(t){var r=t.rows.map((function(e){var t,r;return e.recordNumberList=null!==e&&void 0!==e&&e.recordNumber?null===(t=e.recordNumber)||void 0===t?void 0:t.split("/"):[],e.chaseNumberList=null!==e&&void 0!==e&&e.chaseNumber?null===(r=e.chaseNumber)||void 0===r?void 0:r.split("/"):[],e}));e.logList=e.formatObjectArrayNullProperty(r),e.total=t.total,e.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={lotteryId:null,dateCode:null,recordNumber:null,chaseNumber:null,winningNumber:null,isWin:null,winningPrice:null,numberType:null,weekType:null,hasMorePurchases:null,delFlag:null,userId:null,createBy:null,createTime:null,updateBy:null,updateTime:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.daterangeCreateTime=[],this.daterangeUpdateTime=[],this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.lotteryId})),this.single=1!==e.length,this.multiple=!e.length},handleNumberTypeChange:function(e){var t=Object(o["a"])(this.dict.type.sys_week_type);"1"===(null===e||void 0===e?void 0:e.toString())&&(this.dynamicWeekList=t.filter((function(e){var t,r=null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.toString();return"2"!==r&&"4"!==r&&"7"!==r}))),"2"===(null===e||void 0===e?void 0:e.toString())&&(this.dynamicWeekList=t.filter((function(e){var t,r=null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.toString();return"1"!==r&&"3"!==r&&"6"!==r}))),["3","4"].includes(null===e||void 0===e?void 0:e.toString())&&(this.dynamicWeekList=t),"5"===(null===e||void 0===e?void 0:e.toString())&&(this.dynamicWeekList=t.filter((function(e){var t,r=null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.toString();return"1"!==r&&"3"!==r&&"4"!==r&&"6"!==r})))},handleAdd:function(){this.reset(),this.open=!0,this.title="添加每日号码记录"},handleUpdate:function(e){var t=this;this.reset();var r=e.lotteryId||this.ids;u(r).then((function(e){var r;t.handleNumberTypeChange(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.numberType),t.form=e.data,t.open=!0,t.title="修改每日号码记录"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(e.form.winningPrice="Y"===e.form.isWin?e.form.winningPrice:0,null!=e.form.lotteryId?d(e.form).then((function(t){e.$modal.msgSuccess("修改成功"),e.open=!1,e.getList()})):c(e.form).then((function(t){e.$modal.msgSuccess("新增成功"),e.open=!1,e.getList()})))}))},handleDelete:function(e){var t=this,r=e.lotteryId||this.ids;this.$modal.confirm("删除后数据无法恢复，请确认是否删除该数据项？").then((function(){return m(r)})).then((function(){t.getList(),t.$modal.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){this.download("lottery/log/export",Object(l["a"])({},this.queryParams),"log_".concat((new Date).getTime(),".xlsx"))},handleQueryRewardDubounce:b["a"].debounce((function(e){this.checkRecordData(e)}),233),checkRecordData:function(e){var t=this;t.lotteryTypeList.includes(null===e||void 0===e?void 0:e.numberType)?null!==e&&void 0!==e&&e.winningNumber&&"-"!==(null===e||void 0===e?void 0:e.winningNumber)?t.$confirm("您已查询过开奖信息，是否需要再次查询","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){t.qryRewardQueryConfig(null===e||void 0===e?void 0:e.dateCode,null===e||void 0===e?void 0:e.numberType,null===e||void 0===e?void 0:e.lotteryId)})).catch((function(){})):null!==e&&void 0!==e&&e.dateCode?this.qryRewardQueryConfig(null===e||void 0===e?void 0:e.dateCode,null===e||void 0===e?void 0:e.numberType,null===e||void 0===e?void 0:e.lotteryId):this.$modal.msgWarning("查询失败！请补充完整期号！"):this.$modal.msgError("数据异常，请联系管理员！")},qryRewardQueryConfig:function(e,t,r){var a=this;e&&t&&r?(this.qryRewardLoading=!0,Object(y["d"])({secretKey:"qryLotteryRewardAppId"}).then((function(n){if(n&&null!==n&&void 0!==n&&n.rows&&(null===n||void 0===n?void 0:n.rows.length)>0&&200===(null===n||void 0===n?void 0:n.code)){var l=Object(f["d"])(n.rows[0].secretValue,h());Object(y["d"])({secretKey:"qryLotteryRewardAppSecret"}).then((function(n){if(n&&null!==n&&void 0!==n&&n.rows&&(null===n||void 0===n?void 0:n.rows.length)>0&&200===(null===n||void 0===n?void 0:n.code)){var o=Object(f["d"])(n.rows[0].secretValue,h());a.queryLotteryRewardInfo(l,o,e,t,r)}else a.$modal.msgWarning("查询中奖信息查询接口配置项AppSecret失败！")})).catch((function(e){console.error("查询中奖信息查询接口配置项AppSecret异常："+e),a.qryRewardLoading=!1}))}else a.$modal.msgWarning("查询中奖信息查询接口配置项AppId失败！")})).catch((function(e){console.error("查询中奖信息查询接口配置项AppId异常："+e),a.qryRewardLoading=!1}))):a.$modal.msgWarning("缺少必要查询条件，请联系管理员！")},queryLotteryRewardInfo:function(e,t,r,a,n){var l=this,o={1:"cjdlt",2:"ssq",3:"pl3",4:"pl5",5:"qxc"};v.a.get("https://www.mxnzp.com/api/lottery/common/aim_lottery",{params:{app_id:e,app_secret:t,expect:r,code:o[a]}}).then((function(e){var t,r;if(e&&1===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.code)){var o,i=(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.data)||{};null!==i&&void 0!==i&&i.openCode?l.formatWinningNumber(i.openCode,a,n):(l.$modal.msgWarning("外部接口异常，请联系管理员！"),l.qryRewardLoading=!1)}else if(10027===(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.code))l.$modal.msgWarning("暂未开奖，请晚些时候再查询！"),l.qryRewardLoading=!1;else{var s;l.$modal.msgWarning("第三方站点开奖号码查询失败！报错信息：".concat(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.msg)),l.qryRewardLoading=!1}})).catch((function(e){l.qryRewardLoading=!1,l.$modal.msgWarning("开奖号码查询出现异常，请联系管理员！报错信息：".concat(e))}))},formatWinningNumber:function(e,t,r){var a=e.replace(/\+/,"-").replace(/\+/,","),n=a.split("-"),l=n[0].split(",").map(Number).sort((function(e,t){return e-t})),o=n[1].split(",").map(Number).sort((function(e,t){return e-t})),i=l.join(","),s=o.join(","),u=i+"-"+s;this.saveWinningNumber(u,t,r)},saveWinningNumber:function(e,t,r){var a=this,n={lotteryId:r,winningNumber:e};d(n).then((function(n){200===(null===n||void 0===n?void 0:n.code)?a.checkIsGetReward(e,t,r):a.$modal.msgWarning("开奖号码保存失败！")})).finally((function(){a.qryRewardLoading=!1}))},checkIsGetReward:function(e,t,r){var a=this;u(r).then((function(n){if(200===(null===n||void 0===n?void 0:n.code))if(null!==n&&void 0!==n&&n.data){var l,o,i,s,u=(null===n||void 0===n||null===(l=n.data)||void 0===l||null===(o=l.recordNumber)||void 0===o?void 0:o.split("/"))||[],c=(null===n||void 0===n||null===(i=n.data)||void 0===i||null===(s=i.chaseNumber)||void 0===s?void 0:s.split("/"))||[],d=0,m=0;if(u.forEach((function(r){var a=Object(f["b"])(t,r,e);(null===a||void 0===a?void 0:a.prizeLevel)>0&&(d+=1,m+=null===a||void 0===a?void 0:a.prizeAmount)})),c.forEach((function(r){var a=Object(f["b"])(t,r,e);(null===a||void 0===a?void 0:a.prizeLevel)>0&&(d+=1,m+=null===a||void 0===a?void 0:a.prizeAmount)})),d>0){var p=1===t?"大乐透":2===t?"双色球":"";a.$confirm("","恭喜您中奖了！",{confirmButtonText:"保存",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,message:"\n                                <p>本期所购 <strong>".concat(p,"</strong> 中共计 <strong>").concat(d,"</strong> 注号码中奖</p>\n                                <p>初步预计奖金 <strong>￥").concat(m,"</strong></p>\n                                <p>是否需要为您记录中奖信息？</p>\n                              ")}).then((function(){a.saveRewardInfo(r,"Y",m)})).catch((function(){a.getList()}))}else a.$modal.alertSuccess("开奖号码保存成功！本期未中奖！"),a.getList()}else a.$modal.msgError("开奖号码保存成功，但是未查询到本期购买记录！请联系管理员！"),a.getList();else a.$modal.msgError("开奖号码保存成功，但是未查询到本期购买记录！请联系管理员！"),a.getList()})).catch((function(e){console.error("查询历史号码详情接口异常："+e),a.getList()}))},saveRewardInfo:function(e,t,r){var a=this,n={lotteryId:e,isWin:t,winningPrice:r};d(n).then((function(e){200===(null===e||void 0===e?void 0:e.code)?(a.$modal.msgSuccess("中奖信息保存成功！"),a.getList()):a.$modal.msgWarning("中奖信息保存失败！")}))}}},k=w,_=r("2877"),T=Object(_["a"])(k,a,n,!1,null,null,null);t["default"]=T.exports},d998:function(e,t,r){var a=r("342f");e.exports=/MSIE|Trident/.test(a)}}]);