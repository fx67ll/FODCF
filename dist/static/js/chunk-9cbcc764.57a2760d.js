(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9cbcc764"],{"1f27":function(t,s,e){"use strict";e.r(s);var n=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"status-card"},[e("div",{staticClass:"status-header"},[e("h2",[t._v("Tomcat 服务管理")]),e("div",{staticClass:"refresh-container"},[e("el-button",{staticClass:"refresh-btn",attrs:{type:"text",icon:"el-icon-refresh",loading:t.isRefreshing},on:{click:t.handleRefresh}},[t._v(" 手动刷新 ")]),e("span",{staticClass:"refresh-time"},[t._v("最后刷新: "+t._s(t.lastRefreshTime))])],1)]),e("div",{staticClass:"status-content"},[e("div",{staticClass:"status-indicator"},[e("div",{staticClass:"indicator-dot",class:"运行中"===t.status?"running":"stopped"}),e("div",{staticClass:"status-text"},[t._v(t._s(t.status))])]),e("div",{staticClass:"operation-buttons"},[e("el-button",{attrs:{type:"success",icon:"el-icon-play",disabled:"运行中"===t.status||t.isOperating},on:{click:t.startTomcat}},[t._v(" 启动服务 ")]),e("el-button",{attrs:{type:"danger",icon:"el-icon-stop",disabled:"已停止"===t.status||t.isOperating},on:{click:t.stopTomcat}},[t._v(" 停止服务 ")])],1)]),t.logInfo?e("div",{staticClass:"status-log"},[e("h3",[t._v("操作日志")]),e("pre",[t._v(t._s(t.logInfo))])]):t._e()])])},a=[],i=(e("d3b7"),e("99af"),e("b775"));function o(){return Object(i["a"])({url:"/server/tomcat/status",method:"get"})}function r(){return Object(i["a"])({url:"/server/tomcat/start",method:"post"})}function c(){return Object(i["a"])({url:"/server/tomcat/stop",method:"post"})}var u={name:"TomcatManager",data:function(){return{status:"加载中...",lastRefreshTime:"",logInfo:"",isOperating:!1,refreshInterval:null,isRefreshing:!1}},created:function(){var t=this;this.queryStatus(),this.refreshInterval=setInterval((function(){t.queryStatus()}),1e4)},beforeDestroy:function(){this.refreshInterval&&clearInterval(this.refreshInterval)},methods:{handleRefresh:function(){var t=this;this.isRefreshing=!0,this.queryStatus().finally((function(){t.isRefreshing=!1}))},queryStatus:function(){var t=this;return o().then((function(s){t.status=s.data,t.lastRefreshTime=t.formatDateTime(new Date)})).catch((function(s){t.$message.error("查询状态失败: "+(s.msg||s.message)),t.status="未知"}))},startTomcat:function(){var t=this;this.$confirm("确定要启动Tomcat服务吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.isOperating=!0,t.logInfo="正在启动Tomcat服务...",r().then((function(s){t.$message.success(s.msg),t.logInfo=s.data||s.msg,setTimeout((function(){t.queryStatus(),setTimeout((function(){t.queryStatus(),t.isOperating=!1}),3e3)}),1e3)})).catch((function(s){t.$message.error(s.msg||"启动失败"),t.logInfo=s.msg||"启动失败",t.isOperating=!1,t.queryStatus()}))})).catch((function(){t.$message.info("已取消启动")}))},stopTomcat:function(){var t=this;this.$confirm("确定要停止Tomcat服务吗？停止后可能导致相关应用无法访问。","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((function(){t.isOperating=!0,t.logInfo="正在停止Tomcat服务...",c().then((function(s){t.$message.success(s.msg),t.logInfo=s.data||s.msg,setTimeout((function(){t.queryStatus(),setTimeout((function(){t.queryStatus(),t.isOperating=!1}),3e3)}),1e3)})).catch((function(s){t.$message.error(s.msg||"停止失败"),t.logInfo=s.msg||"停止失败",t.isOperating=!1,t.queryStatus()}))})).catch((function(){t.$message.info("已取消停止")}))},formatDateTime:function(t){var s=t.getFullYear(),e=this.padZero(t.getMonth()+1),n=this.padZero(t.getDate()),a=this.padZero(t.getHours()),i=this.padZero(t.getMinutes()),o=this.padZero(t.getSeconds());return"".concat(s,"-").concat(e,"-").concat(n," ").concat(a,":").concat(i,":").concat(o)},padZero:function(t){return t<10?"0".concat(t):t}}},f=u,l=(e("79c2"),e("2877")),h=Object(l["a"])(f,n,a,!1,null,"c6938fcc",null);s["default"]=h.exports},"79c2":function(t,s,e){"use strict";e("7d25")},"7d25":function(t,s,e){}}]);