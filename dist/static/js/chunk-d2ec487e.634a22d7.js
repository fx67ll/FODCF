(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d2ec487e","chunk-2d0e6128"],{"13cf":function(t,e,i){"use strict";i("d7f1")},"96d9":function(t,e,i){"use strict";i.r(e),i.d(e,"currentTime",(function(){return s})),i.d(e,"timeStamp",(function(){return a})),i.d(e,"initData",(function(){return c})),i.d(e,"initTime",(function(){return r}));i("99af"),i("14d9");function n(t){return t<10?"0".concat(t):t}function s(){var t=new Date,e=t.getFullYear(),i=t.getMonth()+1,s=t.getDate(),a=e+"-"+n(i)+"-"+n(s),c=t.getHours(),r=t.getMinutes(),o=t.getSeconds(),h=n(c)+":"+n(r)+":"+n(o);return{date:a,time:h}}function a(t,e){var i=new Date(t),s=i.getFullYear(),a=i.getMonth()+1,c=i.getDate(),r=i.getDay(),o=i.getHours(),h=i.getMinutes(),l=["日","一","二","三","四","五","六"];return{allDate:"".concat(s,"/").concat(n(a),"/").concat(n(c)),date:"".concat(n(s),"-").concat(n(a),"-").concat(n(c)),day:"星期".concat(l[r]),hour:n(o)+":"+n(h)+(e?"":":00")}}function c(){for(var t=[],e=new Date,i=e.getTime(),n=864e5,s={0:"今天",1:"明天",2:"后天"},c=0;c<30;c++){var r;t.push({date:a(i+n*c).date,timeStamp:i+n*c,week:null!==(r=s[c])&&void 0!==r?r:a(i+n*c).day})}return t}function r(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"10:00:00",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"21:00:00",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=[],c=a(Date.now()).allDate,r="".concat(c," ").concat(t),o="".concat(c," ").concat(e),h=new Date(r).getTime(),l=new Date(o).getTime(),d=36e5*i,m=(l-h)/d,u=m%2==0?m:m-1,v=0,f=h;f<=l;f+=d)if(n?(v++,s.push({begin:a(f,n).hour,end:a(f+d,n).hour,disable:!1})):s.push({time:a(f).hour,disable:!1}),n&&v>=u)return s;return s}},c9f4:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},[i("div",{staticClass:"container"},[i("div",{ref:"dateScrollContainer",staticClass:"scroll-view_H b-t b-b"},[i("div",{staticClass:"date-scroll-wrapper"},t._l(t.dateArr,(function(e,n){return i("div",{key:n,staticClass:"flex-box",class:{borderb:n==t.dateActive},on:{click:function(i){return t.selectDateEvent(n,e)}}},[i("div",{staticClass:"date-box",style:{color:n==t.dateActive?t.selectedTabColor:"#333"}},[i("span",{staticClass:"fontw"},[t._v(t._s(e.week))]),i("span",[t._v(t._s(e.date))])])])})),0)]),!t.isSection||t.isQuantum?i("div",{staticClass:"time-box"},t._l(t.timeArr,(function(e,n){return i("div",{key:n,staticClass:"item"},[i("div",{staticClass:"item-box",class:{disable:e.disable&&!e.isMyAppoint,"my-appoint":e.isMyAppoint,active:t.isMultiple?e.isActive:n==t.timeActive},style:{color:e.isMyAppoint?"#2ecc71":t.isMultiple?e.isActive?t.selectedItemColor:"#333":n==t.timeActive?t.selectedItemColor:"#333"},on:{click:function(i){return t.selectTimeEvent(n,e)}}},[t.isQuantum?i("span",[t._v(t._s(e.begin)+"~"+t._s(e.end))]):i("span",[t._v(t._s(e.timeRange))]),i("span",{staticClass:"all"},[t._v(" "+t._s(e.isMyAppoint?"我已约":e.isExpired?"已过期":e.disable?t.disableText:t.undisableText)+" ")])])])})),0):i("div",{staticClass:"time-box"},[t._l(t.timeArr,(function(e,n){return i("div",{key:n,staticClass:"item"},[i("div",{staticClass:"item-box",class:{disable:e.disable&&!e.isMyAppoint,"my-appoint":e.isMyAppoint,active:e.time==t.timeQuanBegin||e.time==t.timeQuanEnd||e.isInclude},style:{color:e.isMyAppoint?"#2ecc71":e.time==t.timeQuanBegin||e.time==t.timeQuanEnd||e.isInclude?t.selectedItemColor:"#333"}},[i("span",[t._v(t._s(e.timeRange))]),i("span",{staticClass:"all"},[t._v(" "+t._s(e.isMyAppoint?"我已约":e.isExpired?"已过期":e.disable?t.disableText:t.undisableText)+" ")])])])})),t.showOvernight?i("div",{staticClass:"item overnight-item-wrapper"},[i("div",{staticClass:"item-box overnight-box",class:{active:t.isOvernightActive,disable:t.isOvernightDisabled}},[i("div",{staticClass:"overnight-content"},[i("span",{staticClass:"overnight-title"},[t._v("包夜")]),i("span",{staticClass:"overnight-time"},[t._v("23:00 ~ 次日09:59")]),i("span",{staticClass:"overnight-status"},[t._v(" "+t._s(t.getOvernightStatusText())+" ")])])])]):t._e()],2)]),i("div",{staticClass:"bottom"},[t.isMultiple||t.isSection||t.isQuantum?t._e():i("div",{staticClass:"show-time"},[t._v(" 预约时间："+t._s(t.orderDateTime)+" ")]),i("button",{staticClass:"submit-btn",on:{click:t.handleSubmit}},[t._v("确认预约")])])])},s=[],a=i("3835"),c=i("b85c"),r=(i("a9e3"),i("fb6a"),i("d3b7"),i("159b"),i("99af"),i("caad"),i("2532"),i("13d5"),i("14d9"),i("96d9")),o={name:"prettyTimes",props:{showPop:{type:Boolean,default:!1},isQuantum:{type:Boolean,default:!1},isMultiple:{type:Boolean,default:!1},isSection:{type:Boolean,default:!1},showOvernight:{type:Boolean,default:!1},disableText:{type:String,default:"已约满"},undisableText:{type:String,default:"可预约"},timeInterval:{type:Number,default:1},selectedTabColor:{type:String,default:"#2ecc71"},selectedItemColor:{type:String,default:"#2ecc71"},beginTime:{type:String,default:"09:00:00"},endTime:{type:String,default:"19:00:00"},appointTime:{type:Array,default:function(){return[]}},disableTimeSlot:{type:Array,default:function(){return[]}},myAppointTimeSlot:{type:Array,default:function(){return[]}},formParams:{type:Object,default:function(){return{}}}},data:function(){return{orderDateTime:"暂无选择",orderTimeArr:{},dateArr:[],timeArr:[],nowDate:"",dateActive:0,timeActive:0,timeQuanBeginIndex:0,selectDate:"",timeQuanBegin:"",timeQuanEnd:"",isOvernightActive:!1,isOvernightDisabled:!1,isOvernightExpired:!1,isOvernightMyAppoint:!1,isWheelEventAdded:!1}},watch:{appointTime:{handler:function(t){this.initOnload()}},disableTimeSlot:{handler:function(t){this.initOnload()},deep:!0},myAppointTimeSlot:{handler:function(t){this.initOnload()},deep:!0},formParams:{handler:function(t){this.checkOvernightEcho(),this.checkTimeSectionEcho()},deep:!0},showPop:{handler:function(t){this.$emit("change",t)}}},created:function(){this.selectDate=this.nowDate=Object(r["currentTime"])().date,this.initOnload()},mounted:function(){this.$emit("ready"),this.addWheelEventListener()},beforeDestroy:function(){this.removeWheelEventListener()},methods:{addWheelEventListener:function(){if(!this.isWheelEventAdded){var t=this.$refs.dateScrollContainer;t&&(t.addEventListener("wheel",this.handleWheelScroll,{passive:!1}),this.isWheelEventAdded=!0)}},removeWheelEventListener:function(){if(this.isWheelEventAdded){var t=this.$refs.dateScrollContainer;t&&(t.removeEventListener("wheel",this.handleWheelScroll),this.isWheelEventAdded=!1)}},handleWheelScroll:function(t){t.preventDefault();var e=this.$refs.dateScrollContainer;if(e){var i=4*t.deltaY;e.scrollLeft+=i}},initOnload:function(){var t=this;this.dateArr=Object(r["initData"])(),this.timeArr=Object(r["initTime"])(this.beginTime,this.endTime,this.timeInterval,this.isQuantum),this.timeQuanBegin=this.timeQuanEnd="";var e=!0,i=Object(r["currentTime"])().time,n=new Date("2000-01-01 ".concat(i)).getTime(),s=n+36e5,o=new Date(s).toTimeString().slice(0,8);this.isSection&&!this.isQuantum?this.timeArr.forEach((function(t,e){var i=t.time,n=i.slice(0,5),s=i.slice(0,2),a="".concat(s,":59");t.timeRange="".concat(n,"~").concat(a)})):this.isQuantum||this.timeArr.forEach((function(t,e){var i=t.time,n=i.slice(0,5),s=i.slice(0,2),a="".concat(s,":59");t.timeRange="".concat(n,"~").concat(a)})),this.checkOvernightStatus(),this.checkTimeSectionEcho(),this.timeArr.forEach((function(i,n){if(i.isMyAppoint=!1,i.isExpired=!1,t.isQuantum){var s,r="".concat(t.selectDate," ").concat(i.begin,":00"),h="".concat(t.selectDate," ").concat(i.end,":00"),l=Object(c["a"])(t.myAppointTimeSlot);try{for(l.s();!(s=l.n()).done;){var d=s.value,m=Object(a["a"])(d,2),u=m[0],v=void 0===u?"":u,f=m[1],g=void 0===f?"":f;v&&g&&v<=r&&h<=g&&(i.isMyAppoint=!0,i.disable=!1)}}catch(J){l.e(J)}finally{l.f()}if(!i.isMyAppoint){if(t.disableTimeSlot&&t.disableTimeSlot.length>0){var p,A=Object(c["a"])(t.disableTimeSlot);try{for(A.s();!(p=A.n()).done;){var b=p.value,D=Object(a["a"])(b,2),T=D[0],y=void 0===T?"":T,O=D[1],E=void 0===O?"":O;y&&E&&!isNaN(new Date(y).getTime())&&!isNaN(new Date(E).getTime())&&(y<=r&&h<=E&&(i.disable=!0))}}catch(J){A.e(J)}finally{A.f()}}t.selectDate==t.nowDate&&o>"".concat(i.begin,":00")&&(i.disable=!0,i.isExpired=!0)}if(t.orderTimeArr[t.selectDate]){var S,Q=Object(c["a"])(t.orderTimeArr[t.selectDate]);try{for(Q.s();!(S=Q.n()).done;){var w=S.value;w[0].split(" ")[1]==="".concat(i.begin,":00")&&w[1].split(" ")[1]==="".concat(i.end,":00")&&(i.isActive=!0)}}catch(J){Q.e(J)}finally{Q.f()}}}else{if(!i.time||i.time.length<8)return void(i.disable=!0);var x="".concat(t.selectDate," ").concat(i.time);if(isNaN(new Date(x).getTime()))return void(i.disable=!0);var M,C=Object(c["a"])(t.myAppointTimeSlot);try{for(C.s();!(M=C.n()).done;){var _=M.value,B=Object(a["a"])(_,2),k=B[0],$=void 0===k?"":k,I=B[1],j=void 0===I?"":I;$&&j&&$<=x&&x<=j&&(i.isMyAppoint=!0,i.disable=!1)}}catch(J){C.e(J)}finally{C.f()}if(!i.isMyAppoint){if(t.disableTimeSlot&&t.disableTimeSlot.length>0){var N,P=Object(c["a"])(t.disableTimeSlot);try{for(P.s();!(N=P.n()).done;){var W=N.value,L=Object(a["a"])(W,2),R=L[0],H=void 0===R?"":R,Y=L[1],F=void 0===Y?"":Y;if(H&&F&&!isNaN(new Date(H).getTime())&&!isNaN(new Date(F).getTime())&&(H<=x&&x<=F)){i.disable=!0;break}}}catch(J){P.e(J)}finally{P.f()}}i.disable||t.appointTime.forEach((function(e){var n=e.split(" "),s=Object(a["a"])(n,2),c=s[0],r=s[1];c&&r&&c===t.selectDate&&i.time===r&&(i.disable=!0)})),!i.disable&&t.selectDate==t.nowDate&&o>i.time&&(i.disable=!0,i.isExpired=!0)}i.disable||i.isMyAppoint||(e=!1),t.isSection&&(t.formParams.reservationStartTime&&t.formParams.reservationEndTime||(i.isInclude=!1)),t.isMultiple&&(t.orderTimeArr[t.selectDate]||[]).includes(i.time)&&(i.isActive=!0)}})),e=!0,this.timeArr.forEach((function(t){t.disable||t.isMyAppoint||(e=!1)})),this.orderDateTime=e?"暂无选择":this.selectDate,this.timeActive=-1;for(var h=0,l=this.timeArr.length;h<l;h++)if(!this.timeArr[h].disable&&!this.timeArr[h].isMyAppoint){var d=this.timeArr[h].time.slice(0,2),m=this.timeArr[h].time.slice(0,5);this.orderDateTime="".concat(this.selectDate," ").concat(m,"~").concat(d,":59"),this.timeActive=h;break}},checkTimeSectionEcho:function(){if(this.isSection&&this.formParams.reservationStartTime&&this.formParams.reservationEndTime){var t=this.formParams.reservationStartTime,e=this.formParams.reservationEndTime,i=t.split(" ")[0];if(i===this.selectDate){var n=t.split(" ")[1].slice(0,2),s=t.split(" ")[1].slice(0,5),a="".concat(n,":59"),c=-1,r=-1;if(this.timeArr.forEach((function(t,i){var n=t.time.slice(0,5);n===s&&(c=i),t.time.slice(0,5)===e.split(" ")[1].slice(0,5)&&(r=i)})),-1!==c&&-1!==r){this.timeQuanBeginIndex=c,this.timeQuanBegin=this.timeArr[c].time,this.timeQuanEnd=this.timeArr[r].time;for(var o=c+1;o<r;o++)this.timeArr[o].isInclude=!0;this.orderDateTime="".concat(this.selectDate," ").concat(s," ~ ").concat(a)}}}},getOvernightStatusText:function(){return this.isOvernightExpired?"已过期":this.isOvernightMyAppoint?"我已约":this.isOvernightDisabled?"已约满":"可预约"},checkOvernightStatus:function(){if(this.isOvernightActive=!1,this.isOvernightDisabled=!1,this.isOvernightExpired=!1,this.isOvernightMyAppoint=!1,this.showOvernight){var t="".concat(this.selectDate," 23:00:00"),e=this.getNextDate(this.selectDate),i="".concat(e," 09:00:00");if(this.selectDate===this.nowDate){var n=new Date,s=new Date("".concat(this.selectDate," 23:00:00"));n>=s&&(this.isOvernightExpired=!0,this.isOvernightDisabled=!0)}var r,o=Object(c["a"])(this.myAppointTimeSlot);try{for(o.s();!(r=o.n()).done;){var h=r.value,l=Object(a["a"])(h,2),d=l[0],m=void 0===d?"":d,u=l[1],v=void 0===u?"":u;if(m&&v&&m===t&&v===i){this.isOvernightMyAppoint=!0,this.isOvernightDisabled=!0;break}}}catch(O){o.e(O)}finally{o.f()}if(!this.isOvernightMyAppoint&&!this.isOvernightExpired&&this.disableTimeSlot&&this.disableTimeSlot.length>0){var f,g=Object(c["a"])(this.disableTimeSlot);try{for(g.s();!(f=g.n()).done;){var p=f.value,A=Object(a["a"])(p,2),b=A[0],D=void 0===b?"":b,T=A[1],y=void 0===T?"":T;if(D&&y&&(D<=t&&t<y||D<i&&i<=y||t<=D&&y<=i)){this.isOvernightDisabled=!0;break}}}catch(O){g.e(O)}finally{g.f()}}this.checkOvernightEcho()}},checkOvernightEcho:function(){if(this.showOvernight){var t="".concat(this.selectDate," 23:00:00"),e=this.getNextDate(this.selectDate),i="".concat(e," 10:00:00");if(this.formParams&&this.formParams.reservationStartTime&&this.formParams.reservationEndTime){var n=this.formParams.reservationStartTime,s=this.formParams.reservationEndTime;n===t&&s===i?(this.isOvernightActive=!0,this.orderDateTime="".concat(this.selectDate," 23:00 ~ ").concat(e," 10:00")):this.isOvernightActive=!1}}},getNextDate:function(t){var e=new Date(t);return e.setDate(e.getDate()+1),e.toISOString().split("T")[0]},selectOvernightEvent:function(){if(!this.isOvernightDisabled)if(this.isOvernightActive=!this.isOvernightActive,this.isOvernightActive){this.clearTimeSelection();var t="".concat(this.selectDate," 23:00:00"),e=this.getNextDate(this.selectDate),i="".concat(e," 10:00:00");this.$emit("overnight-change",{start:t,end:i,date:this.selectDate}),this.orderDateTime="".concat(this.selectDate," 23:00 ~ ").concat(e," 10:00")}else this.$emit("overnight-change",null),this.orderDateTime="暂无选择"},clearTimeSelection:function(){this.timeActive=-1,this.timeQuanBegin="",this.timeQuanEnd="",this.orderDateTime="暂无选择",this.orderTimeArr={},this.timeArr.forEach((function(t){t.isActive=!1,t.isInclude=!1}))},selectDateEvent:function(t,e){this.dateActive=t,this.selectDate=e.date,this.initOnload(),this.$emit("date-change",{selectedDate:e.date,selectedWeek:e.week,activeIndex:t})},selectTimeEvent:function(t,e){var i=this;if(this.isOvernightActive&&(this.isOvernightActive=!1,this.$emit("overnight-change",null)),this.isQuantum)return this.handleSelectQuantum(t,e);if(!e.isMyAppoint&&!e.disable)if(this.isMultiple){e.isActive=!e.isActive,this.timeArr=this.timeArr.slice(),this.orderTimeArr[this.selectDate]=this.timeArr.reduce((function(t,e){return e.isActive&&t.push(e.time),t}),[]);var n=[],s=function(t){i.orderTimeArr[t].forEach((function(e){n.push("".concat(t," ").concat(e))}))};for(var a in this.orderTimeArr)s(a);this.$emit("change",n)}else{this.timeActive=t;var c=e.time.slice(0,2),r=e.time.slice(0,5);this.orderDateTime="".concat(this.selectDate," ").concat(r,"~").concat(c,":59"),this.$emit("change",this.orderDateTime)}},handleSection:function(t,e){var i=this;if(this.isOvernightActive&&(this.isOvernightActive=!1,this.$emit("overnight-change",null)),!e.isMyAppoint&&!e.disable){var n=function(){i.timeQuanBeginIndex=t,i.timeQuanBegin=e.time,i.timeQuanEnd="",i.$emit("change",{beginTime:"".concat(i.selectDate," ").concat(i.timeQuanBegin),endTime:i.timeQuanEnd?"".concat(i.selectDate," ").concat(i.timeQuanEnd):null})};if(this.timeQuanBegin){if(!this.timeQuanEnd&&this.timeQuanBegin){var s,a=!1,c=this.timeQuanBeginIndex,r=t;c>r&&(s=[r,c],c=s[0],r=s[1]);for(var o=c+1;o<r;o++)if(this.timeArr[o].disable||this.timeArr[o].isMyAppoint)return a=!0,void n();if(!a)for(var h=c+1;h<r;h++)this.timeArr[h].isInclude=!0;this.timeQuanEnd=e.time;var l="".concat(this.selectDate," ").concat(this.timeQuanBegin),d="".concat(this.selectDate," ").concat(this.timeQuanEnd),m=this.timeQuanBegin.slice(0,2),u=this.timeQuanBegin.slice(0,5),v="".concat(m,":59");return this.orderDateTime="".concat(this.selectDate," ").concat(u," ~ ").concat(v),void this.$emit("change",{beginTime:l,endTime:d})}this.timeQuanBegin&&this.timeQuanEnd&&(this.timeArr.forEach((function(t){t.isInclude=!1})),n())}else n()}},handleSelectQuantum:function(t,e){var i=this;if(this.isOvernightActive&&(this.isOvernightActive=!1,this.$emit("overnight-change",null)),!e.isMyAppoint&&!e.disable)if(this.isMultiple)e.isActive=!e.isActive,this.timeArr=this.timeArr.slice(),this.orderTimeArr[this.selectDate]=this.timeArr.reduce((function(t,e){var n="".concat(i.selectDate," ").concat(e.begin,":00"),s="".concat(i.selectDate," ").concat(e.end,":00");return e.isActive&&t.push([n,s]),t}),[]),this.$emit("change",this.orderTimeArr);else{this.timeActive=t;var n="".concat(e.begin.slice(0,2),":59");this.orderDateTime={begin:"".concat(this.selectDate," ").concat(e.begin,":00"),end:"".concat(this.selectDate," ").concat(e.end,":00"),displayText:"".concat(e.begin,":00~").concat(n)},this.$emit("change",this.orderDateTime)}},handleChange:function(){var t;this.timeQuanBegin>this.timeQuanEnd&&(t=[this.timeQuanEnd,this.timeQuanBegin],this.timeQuanBegin=t[0],this.timeQuanEnd=t[1])},handleSubmit:function(){var t=this;if(this.isOvernightActive){var e="".concat(this.selectDate," 23:00:00"),i=this.getNextDate(this.selectDate),n="".concat(i," 10:00:00");this.$emit("overnight-submit",{start:e,end:n,date:this.selectDate})}else if(this.isSection){this.handleChange();var s="".concat(this.selectDate," ").concat(this.timeQuanBegin),a=this.timeQuanEnd?"".concat(this.selectDate," ").concat(this.timeQuanEnd):null;this.$emit("change",{beginTime:s,endTime:a})}else if(this.isMultiple){if(this.isQuantum)return void this.$emit("change",this.orderTimeArr);var c=[],r=function(e){t.orderTimeArr[e].forEach((function(t){c.push("".concat(e," ").concat(t))}))};for(var o in this.orderTimeArr)r(o);this.$emit("change",c)}else this.$emit("change",this.orderDateTime)},clearSelected:function(){this.timeActive=-1,this.timeQuanBegin="",this.timeQuanEnd="",this.timeQuanBeginIndex=0,this.orderDateTime="暂无选择",this.orderTimeArr={},this.timeArr.forEach((function(t){t.isActive=!1,t.isInclude=!1})),this.isOvernightActive=!1,this.$emit("overnight-change",null),this.initOnload(),this.$emit("clear",!0)}}},h=o,l=(i("13cf"),i("2877")),d=Object(l["a"])(h,n,s,!1,null,"6f5d6f38",null);e["default"]=d.exports},d7f1:function(t,e,i){}}]);